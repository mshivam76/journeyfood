<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
		<title>Reset Password</title>
		<script type="text/javascript" src="@{/webjars/jquery/2.2.3/jquery.min.js}"></script>
 	    <script	type="text/javascript" src="@{/webjars/bootstrap/4.0.0-2/css/bootstrap.min.js}"></script>
	    <link th:rel="stylesheet" th:href="@{/webjars/font-awesome/5.11.2/css/all.css}"/>
	    <link th:rel="stylesheet" th:href="@{/webjars/bootstrap/4.0.0-2/css/bootstrap.min.css}"/>
	    <script type="text/javascript">
	    window.onload = function() {
	    	document.getElementById("allFieldsAreMandatory").style.display ='none';
        	document.getElementById('cnfPwdError').style.display = 'none';
    	};
	    </script>
	</head>
	<body>
		<form onsubmit="return checkForm();" th:action="@{/resetPassword}" method="post" style="max-width: 350px; margin: 0 auto;">
		    <input type="hidden" name="token" th:value="${token}" />
			<div class="border border-secondary rounded p-3">
				<h2>Reset Your Password</h2>
				<div class="alert alert-danger" id="cnfPwdError" role="alert" >Confirm password is not same as you new password.</div>
				<div class="alert alert-danger" id="allFieldsAreMandatory" role="alert" >All Fields Are Required.</div>
			    <div>
			    	 <div class="form-group">
	                    <label for="nameOfCenter">Enter New Password</label>
					    <input type="password" name="password" id="password" class="form-control"  placeholder="Enter new password" required autofocus />
	                </div>
			        <div class="form-group">
	                    <label for="nameOfCenter">Confirm New Password</label>
					    <input type="password" class="form-control" id="cnfPassword" name="cnfPassword" placeholder="Confirm new password" required autofocus />
	                </div>         
			        <p class="text-center">
			            <input type="submit" id="sbmtBtn" value="Change Password" class="btn btn-primary" />
			            <input type="reset" id="resetBtn" value="Reset Password" onclick="resetForm()" class="btn btn-danger" />
			        </p>
			    </div>
			</div>
		</form>
		<script>
		function resetForm(){
	        var newP=document.getElementById("password").value="";
	        var confirmP =document.getElementById("cnfPassword").value="";
		}
		function checkForm(){
		    var newP=document.getElementById("password").value;
		    var confirmP =document.getElementById("cnfPassword").value;
		    if(newP!=""&&confirmP!="")
		    {	
		        if(newP==confirmP){
		        	document.getElementById("allFieldsAreMandatory").style.display ='none';
		        	document.getElementById('cnfPwdError').style.display = 'none';
		        	document.getElementById('sbmtBtn').disabled=true;
		          	return true;
		         }
		         else
		          {  document.getElementById('cnfPwdError').style.display = 'block';
	        		 document.getElementById('sbmtBtn').disabled=false;
		       	     return false;
		          }
		    }
		    else
		    {
		    	document.getElementById("allFieldsAreMandatory").style.display ='block';
		    	document.getElementById('sbmtBtn').disabled=true;
		     return false;
		    }
		}
		</script>
	</body>
</html>